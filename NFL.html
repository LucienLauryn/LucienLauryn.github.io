<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Regular Season NFL Standings</title>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<style>
path.pats { 
stroke: mediumpurple;
stroke-width: 4px;
}
      
path.pats:hover {
stroke-width: 7px;
stroke: yellow;
	}
	
path,
	line { 
	fill: none;
	stroke: black;
	shape-rendering: crispEdges;
	}
	text {
	font-family: perpetua;
		font-size: 11px;
		}
		
	</style>
</head>
<div id ="button">
<input name="updateButton" 
                type="button" 
                value="Button" 
                onclick="update()" />

<div id ="chart"></div>
<body>
<script type = "text/javascript">

//Global variables
var dataset


//Vis function
var generateVis = function() {
	var w = 550;
	var h = 500;
	var padding = 20;

	svg = d3.select("#chart")
			.append("svg")
			.attr("width",w)
			.attr("height",h)

	var weeks = 16;
	var wins = 16;
	var list = []

	var seq = function(x) {
		for (i = 0; i <= x; i++) { list.push(i); }
		return list
		}

	var dataset = [
		{x:2, y:20},
		{x: 4, y:10},
		{x:6, y:16},
		{x:8, y: 15},
		{x:10, y:15},
		{x: 12, y: 1},
		{x: 14, y: 10},
		{x: 16, y:5},
		{x: 18, y: 10},
		{x: 20, y: 0},
		]

	//Scale dimensions
	var xScale = d3.scale.linear()
					.domain([0,weeks])
					.range([0,w-padding*1.5])
	var yScale = d3.scale.linear()
					.domain([0,wins])
					.range([h-padding,padding])

	//axis dimensions
	var xAxis = d3.svg.axis()
					.scale(xScale)
					.orient("bottom")
					.ticks(weeks)

	var yAxis = d3.svg.axis()
					.scale(yScale)
					.orient("left")
					.ticks(wins)
	
	//Drawing the Axis
				svg.append("g")
					.attr("class","yaxis")
					.attr("transform","translate("+ padding +",0)")
					.call(yAxis)
					
				svg.append("g")
					.attr("class","xaxis")
					.attr("transform","translate("+ padding +","+(h-padding)+")")
					.call(xAxis)


	//Drawing the line
	var line = d3.svg.line()
					.x(function(d) {return xScale(d.x);})
					.y(function(d) {return yScale(d.y);})
					.interpolate("cardinal")
	//Calling line
	var pats = svg
			.data(d)
			.enter()
			.append("path")
			.attr("class","pats")
			.attr("d",line)
	}



//Loading data and generating vis	
d3.csv("compiled.csv", function(d) {

  dataset=d3.nest()
  .key(function(d) {return d.conference;})
  .sortKeys(d3.ascending)
  .entries(d);

	generateVis();

	return {
		team: d.Team,
		wins: +d.Wins,
		losses: +d.Losses,
		ties: +d.Ties};
	})

</script>
</body>
</html>